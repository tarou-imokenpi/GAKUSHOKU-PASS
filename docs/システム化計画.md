# ã‚·ã‚¹ãƒ†ãƒ åŒ–è¨ˆç”»

## ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã®ç›®çš„

- å­¦é£Ÿã®æ³¨æ–‡ã®éš›ã«åˆ¸å£²æ©Ÿå‰ã§ã®é•·ã„è¡Œåˆ—ãŒã§ãã¦ã—ã¾ã„æ³¨æ–‡ã«æ™‚é–“ãŒã‹ã‹ã‚‹å•é¡Œã‚’è§£æ±ºã™ã‚‹
- å¨æˆ¿å´ã§ã®æ³¨æ–‡ç¢ºèªã‹ã‚‰æä¾›ã¾ã§ã®æ™‚é–“çŸ­ç¸®ã‚’å›³ã‚‹

## å¯¾è±¡

- å­¦é£Ÿã‚’åˆ©ç”¨ã™ã‚‹å­¦ç”Ÿ
- å¨æˆ¿ã«ç«‹ã¤èª¿ç†ã‚¹ã‚¿ãƒƒãƒ•

## åŠ¹æœ

- å¾…ã¡æ™‚é–“ãŒæ¸›ã‚Šæ°—è»½ã«æ¥ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ã§ã€åˆ©ç”¨è€…ã®å¢—åŠ 
- ã‚¹ãƒãƒ›ã‚¢ãƒ—ãƒªã‹ã‚‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã§ãã‚‹ã®ã§ã€ã€Œã“ã‚“ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒã‚ã‚‹ã‚“ã ã€è¡Œã£ã¦ã¿ã‚ˆã†ã‹ï¼ã€ã¨åˆ©ç”¨ã—ãŸã“ã¨ã®ãªã„äººã®æ–°è¦é–‹æ‹“ã«ç¹‹ãŒã‚‹
- ç¾åœ¨ã®é£Ÿåˆ¸ã‚’å—ã‘å–ã£ã¦ã‹ã‚‰èª¿ç†ã‚’ã™ã‚‹ã¨ã„ã†ãƒ—ãƒ­ã‚»ã‚¹ã‹ã‚‰ã€äº‹å‰ã«ç¢ºèªã§ãã‚‹ã“ã¨ã§äº‹å‰ã®æº–å‚™ãŒå¯èƒ½ã«ãªã‚Šã€æ¥­å‹™ã®åŠ¹ç‡åŒ–ãŒå›³ã‚Œã‚‹

## æ–°ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¤ãƒ¡ãƒ¼ã‚¸

### ãƒ¦ãƒ¼ã‚¶ãƒ¼å´ï¼ˆå­¦ç”Ÿï¼‰

- å°‚ç”¨ã‚¢ãƒ—ãƒªã‚’ä½¿ç”¨ã—ã¦å­¦é£Ÿãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ³¨æ–‡
- PayPay ã§æ±ºæ¸ˆãŒå¯èƒ½
- å—ã‘å–ã‚Šæ™‚ã«ã‚¹ãƒãƒ›ã‚¢ãƒ—ãƒªã§å—ã‘å–ã‚Šç”»é¢ã‚’èª¿ç†ã‚¹ã‚¿ãƒƒãƒ•ã«è¦‹ã›ã‚‹
- Google ã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ãƒ³ã‚ªãƒ³ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹

### å¨æˆ¿å´ï¼ˆèª¿ç†ã‚¹ã‚¿ãƒƒãƒ•ï¼‰

- æ³¨æ–‡ãŒä¸€è¦§ã§è¡¨ç¤ºã•ã‚Œã‚‹
- æ³¨æ–‡å†…å®¹ã‚’ç¢ºèªã§ãã‚‹
- ã‚¹ãƒãƒ›ã‚¢ãƒ—ãƒªã«è¡¨ç¤ºã•ã‚ŒãŸæ³¨æ–‡ç•ªå·ã¨ç…§åˆã—å—ã‘æ¸¡ã™

---

```mermaid
---
title: å­¦é£Ÿã‚·ã‚¹ãƒ†ãƒ æ¦‚å¿µãƒ•ãƒ­ãƒ¼ï¼ˆGoogleSSOå¯¾å¿œç‰ˆï¼‰
---
sequenceDiagram
    participant Student as ğŸ‘¥ å­¦ç”Ÿ
    participant App as ğŸ“± å­¦é£Ÿã‚¢ãƒ—ãƒª
    participant Google as ğŸ” Google
    participant PayPay as ğŸ’° PayPay
    participant Kitchen as ğŸ³ å¨æˆ¿ã‚·ã‚¹ãƒ†ãƒ 
    participant Staff as ğŸ‘¨â€ğŸ³ èª¿ç†ã‚¹ã‚¿ãƒƒãƒ•

    %% ãƒ­ã‚°ã‚¤ãƒ³ãƒ»èªè¨¼ãƒ•ã‚§ãƒ¼ã‚º
    Note over Student, Staff: ğŸ” ãƒ­ã‚°ã‚¤ãƒ³ãƒ»èªè¨¼ãƒ•ã‚§ãƒ¼ã‚º
    Student->>App: ã‚¢ãƒ—ãƒªèµ·å‹•

    alt ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿
        App-->>Student: ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢è¡¨ç¤º
    else æœªãƒ­ã‚°ã‚¤ãƒ³
        App->>Student: Googleãƒ­ã‚°ã‚¤ãƒ³ç”»é¢è¡¨ç¤º
        Student->>Google: Googleèªè¨¼
        Google-->>App: èªè¨¼å®Œäº†
        App-->>Student: ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢è¡¨ç¤º
    end

    %% æ³¨æ–‡ãƒ•ã‚§ãƒ¼ã‚º
    Note over Student, Staff: ğŸ“± äº‹å‰æ³¨æ–‡ãƒ•ã‚§ãƒ¼ã‚º
    Student->>App: ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç¢ºèªãƒ»æ³¨æ–‡
    Student->>PayPay: PayPayæ±ºæ¸ˆ
    PayPay-->>App: æ±ºæ¸ˆå®Œäº†
    App-->>Student: æ³¨æ–‡ç•ªå·é€šçŸ¥

    %% èª¿ç†ãƒ•ã‚§ãƒ¼ã‚º
    Note over Student, Staff: ğŸ³ èª¿ç†ãƒ•ã‚§ãƒ¼ã‚º
    App->>Kitchen: æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿é€ä¿¡
    Kitchen-->>Staff: æ³¨æ–‡è¡¨ç¤º
    Note over Staff: èª¿ç†å®Ÿè¡Œ
    Staff->>Kitchen: èª¿ç†å®Œäº†å ±å‘Š

    %% å—ã‘å–ã‚Šãƒ•ã‚§ãƒ¼ã‚º
    Note over Student, Staff: ğŸƒâ€â™‚ï¸ å—ã‘å–ã‚Šãƒ•ã‚§ãƒ¼ã‚º
    Kitchen-->>App: å®Œæˆé€šçŸ¥
    App-->>Student: å—ã‘å–ã‚Šé€šçŸ¥
    Student->>Staff: ã‚¢ãƒ—ãƒªç”»é¢æç¤º
    Staff-->>Student: æ–™ç†å—ã‘æ¸¡ã—
```

---

```mermaid
---
title: å­¦é£Ÿæ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ æ¦‚å¿µãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
---
erDiagram
    %% ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å®šç¾©
    STUDENT {
        string student_id PK "å­¦ç”ŸID"
        string google_user_id UK "Google User ID"
        string name "æ°å"
        string email UK "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
        datetime created_at "ç™»éŒ²æ—¥æ™‚"
        datetime last_login "æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³"
    }

    ORDER {
        string order_id PK "æ³¨æ–‡ID"
        string student_id FK "å­¦ç”ŸID"
        datetime order_time "æ³¨æ–‡æ—¥æ™‚"
        int total_amount "åˆè¨ˆé‡‘é¡"
        string status "æ³¨æ–‡çŠ¶æ…‹"
    }

    ORDER_ITEM {
        string order_id PK,FK "æ³¨æ–‡ID"
        string menu_id PK,FK "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ID"
        int quantity "æ•°é‡"
        int unit_price "å˜ä¾¡"
    }

    MENU {
        string menu_id PK "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ID"
        string name "ãƒ¡ãƒ‹ãƒ¥ãƒ¼å"
        int price "ä¾¡æ ¼"
        string category "ã‚«ãƒ†ã‚´ãƒª"
        boolean available "æä¾›å¯èƒ½"
    }

    PAYMENT {
        string payment_id PK "æ±ºæ¸ˆID"
        string order_id FK "æ³¨æ–‡ID"
        string payment_method "æ±ºæ¸ˆæ–¹æ³•"
        datetime payment_time "æ±ºæ¸ˆæ—¥æ™‚"
        string status "æ±ºæ¸ˆçŠ¶æ…‹"
    }

    %% Non-identifying relationship: å­¦ç”Ÿã¯æ³¨æ–‡ã¨ã¯ç‹¬ç«‹ã—ã¦å­˜åœ¨å¯èƒ½
    STUDENT ||..o{ ORDER : "makes"

    %% Identifying relationship: æ³¨æ–‡æ˜ç´°ã¯æ³¨æ–‡ãªã—ã«ã¯å­˜åœ¨ä¸å¯
    ORDER ||--o{ ORDER_ITEM : "contains"

    %% Identifying relationship: æ³¨æ–‡æ˜ç´°ã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãªã—ã«ã¯å­˜åœ¨ä¸å¯
    MENU ||--o{ ORDER_ITEM : "specifies"

    %% Non-identifying relationship: æ±ºæ¸ˆã¯æ³¨æ–‡ã¨ã¯ç‹¬ç«‹ã—ãŸæ¦‚å¿µ
    ORDER ||..|| PAYMENT : "has"
```

### ãƒªãƒ³ã‚¯

[PayPay é–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ ã‚¢ãƒ—ãƒªã‚³ãƒ¼ãƒ«](https://developer.paypay.ne.jp/products/docs/appinvoke)
